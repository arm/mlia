[
  {
    "name": "generic_inference",
    "description": "Application allows to use custom NN tflite model to run inference with Ethos-U. No data pre-/post-processing is executed.",
    "supported_systems": [
      {
        "name": "CS-300: Cortex-M55",
        "variables": {
          "build_dir_suffix": "fvp-cortex-m55",
          "build_params": "-DTARGET_PLATFORM=mps3 -DETHOS_U_NPU_ENABLED=OFF"
        }
      },
      {
        "name": "CS-300: Cortex-M55+Ethos-U55",
        "variables": {
          "build_dir_suffix": "fvp-cortex-m55+ethos-u55",
          "build_params": "-DTARGET_PLATFORM=mps3"
        }
      },
      {
        "name": "CS-300: Cortex-M55+Ethos-U65",
        "variables": {
          "build_dir_suffix": "fvp-cortex-m55+ethos-u65",
          "build_params": "-DTARGET_PLATFORM=mps3"
        }
      }
    ],
    "build_dir": "ethosu-evaluation/build-{software.name}-{variables:build_dir_suffix}",
    "lock": true,
    "variables": {
      "eval_app": "{software.build_dir}/bin/ethos-u-inference_runner.axf",
      "itcm_load": "{software.build_dir}/bin/sectors/inference_runner/itcm.bin",
      "ddr_load": "{software.build_dir}/bin/sectors/inference_runner/ddr.bin"
    },
    "commands": {
      "build": [
        "cmake -DUSE_CASE_BUILD=inference_runner {variables:build_params} {user_params:input_file} -DCMAKE_TOOLCHAIN_FILE=scripts/cmake/toolchains/bare-metal-armclang.cmake ..",
        "cmake --build . --parallel --clean-first"
      ]
    },
    "user_params": {
      "build": [
        {
          "name": "-Dinference_runner_MODEL_TFLITE_PATH=",
          "description": "Full file name for a custom model. Model must be in tflite format compiled with Vela.",
          "values": [],
          "alias": "input_file"
        },
        {
          "name": "-DCPU_PROFILE_ENABLED=",
          "description": "Selects whether CPU profiling (for ML workload) is enabled or not.",
          "values": [
            "ON",
            "OFF"
          ],
          "default_value": "ON",
          "alias": "profile_enabled"
        }
      ]
    }
  }
]
